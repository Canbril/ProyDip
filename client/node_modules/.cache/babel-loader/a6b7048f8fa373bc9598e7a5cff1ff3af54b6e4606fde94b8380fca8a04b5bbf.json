{"ast":null,"code":"var _jsxFileName = \"D:\\\\ProyDip\\\\ProyDip\\\\client\\\\src\\\\SignSharedFile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SignSharedFile({\n  token\n}) {\n  _s();\n  const [sharedFiles, setSharedFiles] = useState([]);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [privateKey, setPrivateKey] = useState(null);\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    // Obtener los archivos compartidos\n    const fetchSharedFiles = async () => {\n      try {\n        const response = await axios.get('/api/files/sign-shared', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setSharedFiles(response.data);\n      } catch (error) {\n        console.error('Error al obtener archivos compartidos:', error);\n      }\n    };\n    fetchSharedFiles();\n  }, [token]);\n  const handleSignFile = async () => {\n    if (!selectedFile || !privateKey) {\n      setMessage('Por favor selecciona un archivo y sube tu llave privada.');\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append('archivo_id', selectedFile);\n      formData.append('privateKey', privateKey);\n      const response = await axios.post('/api/files/sign-shared', formData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMessage(`Firma generada con éxito: ${response.data.signature}`);\n    } catch (error) {\n      console.error('Error al firmar el archivo compartido:', error);\n      setMessage('Error al firmar el archivo.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Firmar Archivos Compartidos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: e => setSelectedFile(e.target.value),\n      value: selectedFile,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Selecciona un archivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), sharedFiles.map(file => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: file.archivo_id,\n        children: file.nombre_archivo\n      }, file.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \".pem\",\n      onChange: e => setPrivateKey(e.target.files[0])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignFile,\n      children: \"Firmar Archivo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n_s(SignSharedFile, \"RP+zXEqMfCKaWQL4XHO/BhaZhXc=\");\n_c = SignSharedFile;\nexport default SignSharedFile;\nvar _c;\n$RefreshReg$(_c, \"SignSharedFile\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","SignSharedFile","token","_s","sharedFiles","setSharedFiles","selectedFile","setSelectedFile","privateKey","setPrivateKey","message","setMessage","fetchSharedFiles","response","get","headers","Authorization","data","error","console","handleSignFile","formData","FormData","append","post","signature","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","e","target","value","map","file","archivo_id","nombre_archivo","id","type","accept","files","onClick","_c","$RefreshReg$"],"sources":["D:/ProyDip/ProyDip/client/src/SignSharedFile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction SignSharedFile({ token }) {\r\n    const [sharedFiles, setSharedFiles] = useState([]);\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n    const [privateKey, setPrivateKey] = useState(null);\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        // Obtener los archivos compartidos\r\n        const fetchSharedFiles = async () => {\r\n            try {\r\n                const response = await axios.get('/api/files/sign-shared', {\r\n                    headers: { Authorization: `Bearer ${token}` },\r\n                });\r\n                setSharedFiles(response.data);\r\n            } catch (error) {\r\n                console.error('Error al obtener archivos compartidos:', error);\r\n            }\r\n        };\r\n        fetchSharedFiles();\r\n    }, [token]);\r\n\r\n    const handleSignFile = async () => {\r\n        if (!selectedFile || !privateKey) {\r\n            setMessage('Por favor selecciona un archivo y sube tu llave privada.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('archivo_id', selectedFile);\r\n            formData.append('privateKey', privateKey);\r\n\r\n            const response = await axios.post('/api/files/sign-shared', formData, {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n\r\n            setMessage(`Firma generada con éxito: ${response.data.signature}`);\r\n        } catch (error) {\r\n            console.error('Error al firmar el archivo compartido:', error);\r\n            setMessage('Error al firmar el archivo.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>Firmar Archivos Compartidos</h2>\r\n            <select onChange={(e) => setSelectedFile(e.target.value)} value={selectedFile}>\r\n                <option value=\"\">Selecciona un archivo</option>\r\n                {sharedFiles.map((file) => (\r\n                    <option key={file.id} value={file.archivo_id}>\r\n                        {file.nombre_archivo}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n            <input\r\n                type=\"file\"\r\n                accept=\".pem\"\r\n                onChange={(e) => setPrivateKey(e.target.files[0])}\r\n            />\r\n            <button onClick={handleSignFile}>Firmar Archivo</button>\r\n            {message && <p>{message}</p>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SignSharedFile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}