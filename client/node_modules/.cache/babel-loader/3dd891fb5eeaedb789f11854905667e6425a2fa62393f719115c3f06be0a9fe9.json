{"ast":null,"code":"var _jsxFileName = \"D:\\\\ProyDip\\\\ProyDip\\\\client\\\\src\\\\SignSharedFile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SignSharedFile({\n  token\n}) {\n  _s();\n  const [sharedFiles, setSharedFiles] = useState([]);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [privateKey, setPrivateKey] = useState(null);\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    // Obtener los archivos compartidos\n    const fetchUserFiles = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_API_URL}/api/files/user-files`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        const files = await response.json();\n        if (Array.isArray(files)) {\n          setUserFiles(files);\n        } else {\n          console.error('Error: La respuesta no es un arreglo.', files);\n          setUserFiles([]);\n        }\n      } catch (error) {\n        console.error('Error al obtener los archivos:', error);\n        setUserFiles([]);\n      }\n    };\n    fetchSharedFiles();\n  }, [token]);\n  const handleSignFile = async () => {\n    if (!selectedFile || !privateKey) {\n      setMessage('Por favor selecciona un archivo y sube tu llave privada.');\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append('archivo_id', selectedFile);\n      formData.append('privateKey', privateKey);\n      const response = await axios.post('/api/files/sign-shared', formData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMessage(`Firma generada con éxito: ${response.data.signature}`);\n    } catch (error) {\n      console.error('Error al firmar el archivo compartido:', error);\n      setMessage('Error al firmar el archivo.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Firmar Archivos Compartidos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: e => setSelectedFile(e.target.value),\n      value: selectedFile,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Selecciona un archivo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), sharedFiles.map(file => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: file.archivo_id,\n        children: file.nombre_archivo\n      }, file.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \".pem\",\n      onChange: e => setPrivateKey(e.target.files[0])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignFile,\n      children: \"Firmar Archivo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}\n_s(SignSharedFile, \"RP+zXEqMfCKaWQL4XHO/BhaZhXc=\");\n_c = SignSharedFile;\nexport default SignSharedFile;\nvar _c;\n$RefreshReg$(_c, \"SignSharedFile\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","SignSharedFile","token","_s","sharedFiles","setSharedFiles","selectedFile","setSelectedFile","privateKey","setPrivateKey","message","setMessage","fetchUserFiles","response","fetch","process","env","REACT_APP_API_URL","headers","files","json","Array","isArray","setUserFiles","console","error","fetchSharedFiles","handleSignFile","formData","FormData","append","post","Authorization","data","signature","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","e","target","value","map","file","archivo_id","nombre_archivo","id","type","accept","onClick","_c","$RefreshReg$"],"sources":["D:/ProyDip/ProyDip/client/src/SignSharedFile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction SignSharedFile({ token }) {\r\n    const [sharedFiles, setSharedFiles] = useState([]);\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n    const [privateKey, setPrivateKey] = useState(null);\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        // Obtener los archivos compartidos\r\n        const fetchUserFiles = async () => {\r\n            try {\r\n                const response = await fetch(`${process.env.REACT_APP_API_URL}/api/files/user-files`, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${token}`,\r\n                    },\r\n                });\r\n                const files = await response.json();\r\n                if (Array.isArray(files)) {\r\n                    setUserFiles(files);\r\n                } else {\r\n                    console.error('Error: La respuesta no es un arreglo.', files);\r\n                    setUserFiles([]);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error al obtener los archivos:', error);\r\n                setUserFiles([]);\r\n            }\r\n        };\r\n        fetchSharedFiles();\r\n    }, [token]);\r\n\r\n    const handleSignFile = async () => {\r\n        if (!selectedFile || !privateKey) {\r\n            setMessage('Por favor selecciona un archivo y sube tu llave privada.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('archivo_id', selectedFile);\r\n            formData.append('privateKey', privateKey);\r\n\r\n            const response = await axios.post('/api/files/sign-shared', formData, {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n\r\n            setMessage(`Firma generada con éxito: ${response.data.signature}`);\r\n        } catch (error) {\r\n            console.error('Error al firmar el archivo compartido:', error);\r\n            setMessage('Error al firmar el archivo.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2>Firmar Archivos Compartidos</h2>\r\n            <select onChange={(e) => setSelectedFile(e.target.value)} value={selectedFile}>\r\n                <option value=\"\">Selecciona un archivo</option>\r\n                {sharedFiles.map((file) => (\r\n                    <option key={file.id} value={file.archivo_id}>\r\n                        {file.nombre_archivo}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n            <input\r\n                type=\"file\"\r\n                accept=\".pem\"\r\n                onChange={(e) => setPrivateKey(e.target.files[0])}\r\n            />\r\n            <button onClick={handleSignFile}>Firmar Archivo</button>\r\n            {message && <p>{message}</p>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SignSharedFile;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,SAASC,cAAcA,CAAC;EAAEC;AAAM,CAAC,EAAE;EAAAC,EAAA;EAC/B,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACU,YAAY,EAAEC,eAAe,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACY,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAE1CC,SAAS,CAAC,MAAM;IACZ;IACA,MAAMe,cAAc,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,uBAAuB,EAAE;UAClFC,OAAO,EAAE;YACL,eAAe,EAAE,UAAUhB,KAAK;UACpC;QACJ,CAAC,CAAC;QACF,MAAMiB,KAAK,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;QACnC,IAAIC,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC,EAAE;UACtBI,YAAY,CAACJ,KAAK,CAAC;QACvB,CAAC,MAAM;UACHK,OAAO,CAACC,KAAK,CAAC,uCAAuC,EAAEN,KAAK,CAAC;UAC7DI,YAAY,CAAC,EAAE,CAAC;QACpB;MACJ,CAAC,CAAC,OAAOE,KAAK,EAAE;QACZD,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;QACtDF,YAAY,CAAC,EAAE,CAAC;MACpB;IACJ,CAAC;IACDG,gBAAgB,CAAC,CAAC;EACtB,CAAC,EAAE,CAACxB,KAAK,CAAC,CAAC;EAEX,MAAMyB,cAAc,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACrB,YAAY,IAAI,CAACE,UAAU,EAAE;MAC9BG,UAAU,CAAC,0DAA0D,CAAC;MACtE;IACJ;IAEA,IAAI;MACA,MAAMiB,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAExB,YAAY,CAAC;MAC3CsB,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEtB,UAAU,CAAC;MAEzC,MAAMK,QAAQ,GAAG,MAAMf,KAAK,CAACiC,IAAI,CAAC,wBAAwB,EAAEH,QAAQ,EAAE;QAClEV,OAAO,EAAE;UAAEc,aAAa,EAAE,UAAU9B,KAAK;QAAG;MAChD,CAAC,CAAC;MAEFS,UAAU,CAAC,6BAA6BE,QAAQ,CAACoB,IAAI,CAACC,SAAS,EAAE,CAAC;IACtE,CAAC,CAAC,OAAOT,KAAK,EAAE;MACZD,OAAO,CAACC,KAAK,CAAC,wCAAwC,EAAEA,KAAK,CAAC;MAC9Dd,UAAU,CAAC,6BAA6B,CAAC;IAC7C;EACJ,CAAC;EAED,oBACIX,OAAA;IAAAmC,QAAA,gBACInC,OAAA;MAAAmC,QAAA,EAAI;IAA2B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACpCvC,OAAA;MAAQwC,QAAQ,EAAGC,CAAC,IAAKlC,eAAe,CAACkC,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;MAACA,KAAK,EAAErC,YAAa;MAAA6B,QAAA,gBAC1EnC,OAAA;QAAQ2C,KAAK,EAAC,EAAE;QAAAR,QAAA,EAAC;MAAqB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EAC9CnC,WAAW,CAACwC,GAAG,CAAEC,IAAI,iBAClB7C,OAAA;QAAsB2C,KAAK,EAAEE,IAAI,CAACC,UAAW;QAAAX,QAAA,EACxCU,IAAI,CAACE;MAAc,GADXF,IAAI,CAACG,EAAE;QAAAZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEZ,CACX,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eACTvC,OAAA;MACIiD,IAAI,EAAC,MAAM;MACXC,MAAM,EAAC,MAAM;MACbV,QAAQ,EAAGC,CAAC,IAAKhC,aAAa,CAACgC,CAAC,CAACC,MAAM,CAACvB,KAAK,CAAC,CAAC,CAAC;IAAE;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrD,CAAC,eACFvC,OAAA;MAAQmD,OAAO,EAAExB,cAAe;MAAAQ,QAAA,EAAC;IAAc;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EACvD7B,OAAO,iBAAIV,OAAA;MAAAmC,QAAA,EAAIzB;IAAO;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC3B,CAAC;AAEd;AAACpC,EAAA,CAxEQF,cAAc;AAAAmD,EAAA,GAAdnD,cAAc;AA0EvB,eAAeA,cAAc;AAAC,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}